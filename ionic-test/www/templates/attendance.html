<ion-view view-title="Atendimento">
  <ion-content>

    <form name="attendanceForm" novalidate>
      <div class="list">

        <div class="item item-input">
          <span class="input-label"><strong>Paciente </strong> <span style="color: red">*</span></span>
          <input type="text" name="patient" ng-model="attendance.patient" required capitalize>
        </div>

        <div class="item item-input">
          <span class="input-label"><strong>Valor total </strong> <span style="color: red">*</span></span>
          <input type="number" ng-change="calculateTax(attendance, paymentMethod)" ng-model="attendance.fullValue" required>
        </div>

        <div class="item item-input item-select">
          <div class="input-label"><strong>Forma de pagamento </strong> <span style="color: red">*</span></div>
          <select ng-change="calculateTax(attendance, paymentMethod)" ng-options="paymentMethod.name for paymentMethod in paymentMethods track by paymentMethod.id"
            ng-model="paymentMethod" required>
          <option value=""></option>
        </select>
        </div>

        <div class="item item-input">
          <span class="input-label"><strong>Valor a receber</strong></span>
          <input type="number" ng-model="attendance.receiveValue" disabled />
        </div>

        <div class="item item-input">
          <span class="input-label"><strong>Taxa da máquina</strong></span>
          <input type="number" ng-model="attendance.machineTaxValue" disabled />
        </div>

        <div class="item item-input">
          <span class="input-label"><strong>Taxa da clínica</strong></span>
          <input type="number" ng-model="attendance.clinicValue" disabled />
        </div>

        <div class="item item-input">
          <span class="input-label"><strong>Data de pagamento</strong></span>
          <span>{{attendance.expectedPaymentDate | date: 'dd/MM/yyyy' }}</span>
        </div>

        <div class="item item-input">
          <span class="input-label"><strong>Observações</strong></span>
          <textarea ng-model="attendance.obs" rows="4"></textarea>
        </div>

        <div class="item">
          <button class="button button-block button-positive" ng-click="save(attendance, paymentMethod)" ng-disabled="attendanceForm.$invalid">Salvar</button>
        </div>

      </div>

    </form>
  </ion-content>
</ion-view>